<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Drops | Home Page </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
    .script-font { font-family: 'Dancing Script', cursive; }
    /* Image eka card eken eliyata ena effect eka */
    .product-img-container {
        margin-top: -80px;
        filter: drop-shadow(0 20px 15px rgba(0,0,0,0.2));
    }
</style>



    <style>
        body { font-family: 'Poppins', sans-serif; }
        .script-font { font-family: 'Dancing Script', cursive; }
        .biryani-title { font-weight: 800; color: #3D2B1F; letter-spacing: -2px; }
        
        /* Price Badge Styling */
        .price-badge {
            background-color: #859431;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            border: 2px dashed rgba(255,255,255,0.4);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        /* Wave Divider */
        .wave-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            line-height: 0;
            transform: rotate(180deg);
        }
        .script-font { font-family: 'Dancing Script', cursive; }
    
    /* Image eka thiyena circle eka */
    .product-circle {
        width: 220px;
        height: 220px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: -110px; /* Card eken bagayak uda thiyenna */
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        position: relative;
        z-index: 20;
    }

    .product-circle img {
        width: 85%;
        height: 85%;
        object-fit: contain;
        /* Image eka circle eka thule lassnata thiyenna */
    }

    /* Price tag eka circle eke corner ekata */
    .price-badge {
        position: absolute;
        top: 10px;
        right: -5px;
        background: white;
        width: 65px;
        height: 65px;
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        border: 2px dashed #E5E7EB;
        z-index: 30;
    }
    </style>
</head>
<body class="bg-gray-50">

<section class="relative bg-white pt-4 pb-32 overflow-hidden">
    <nav class="flex justify-between items-center px-10 py-6 max-w-7xl mx-auto relative z-50">
        <div class="flex items-center gap-2">
            <div class="flex items-center gap-3">
                <a href="/" class="inline-block transition-transform hover:scale-105 active:scale-95">
                    <img src="logo.png" alt="Happy Drops Logo" class="h-16 w-auto object-contain">
                </a>
            </div>
        </div>
        <div class="flex items-center gap-6">
            <div class="hidden md:flex items-center gap-3 border border-[#E5E1D8] bg-[#F9F9F9] px-4 py-1.5 rounded-full shadow-sm">
                <div class="text-[#859431]">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.01l-2.2 2.2z"/>
                    </svg>
                </div>
                <div class="text-[12px] font-bold text-[#3D2B1F] tracking-wide">
                    CALL: +94 71 612 4040
                </div>
            </div>
           <button id="main-login-btn" onclick="openAuthModal()" class="bg-[#E0A142] text-white px-8 py-2 rounded-full text-sm font-bold shadow-md hover:bg-[#c98e35] transition-colors uppercase">LOGIN</button>
            
            <button id="open-drawer" class="text-3xl text-gray-700 hover:text-[#E0A142] transition-colors focus:outline-none">☰</button>
        </div>
    </nav>

    <div id="drawer-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] hidden opacity-0 transition-opacity duration-300"></div>

    <div id="side-drawer" class="fixed top-0 right-0 w-[320px] h-full bg-white z-[70] shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out p-8">
        <div class="flex justify-between items-center mb-10">
            <span class="text-[#4A3228] font-black text-xl tracking-tight">HAPPY DROPS</span>
            <button id="close-drawer" class="text-4xl text-gray-400 hover:text-[#E0A142] transition-colors">&times;</button>
        </div>

        <nav class="flex flex-col gap-6">
            <a href="#" class="text-[#4A3228] text-lg font-bold hover:translate-x-2 transition-transform uppercase">Home</a>
            <a href="menu.html" class="text-[#4A3228] text-lg font-bold hover:translate-x-2 transition-transform uppercase">Menu</a>
 <a href="about.html" class="text-[#4A3228] text-lg font-bold hover:translate-x-2 transition-transform uppercase">About Us</a>

            <a href="contact.html" class="text-[#4A3228] text-lg font-bold hover:translate-x-2 transition-transform uppercase">Contact</a>
        </nav>

        <div class="mt-20">
            <button class="w-full bg-[#E0A142] text-white py-4 rounded-full font-bold shadow-lg hover:bg-[#c98e35] transition-colors">ORDER ONLINE</button>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-10 grid md:grid-cols-2 items-center py-10 relative z-20">
        <div class="flex justify-center order-2 md:order-1">
            <div class="w-full max-w-[650px] relative">
                <img src="https://i.ibb.co/NnJsCVTQ/Every-Drop-Make-happy.png" alt="Mutton Biryani" class="w-full h-auto block">
            </div>
        </div>

        <div class="md:pl-20 py-10 order-1 md:order-2 relative">
            
            <h3 class="font-montserrat font-black text-[#4A3228] text-7xl md:text-9xl mb-4 md:mb-6 ml-2 relative z-10 leading-tight" style="font-weight: 900;">Happy</h3>
            <h2 class="font-montserrat font-black text-[#4A3228] text-8xl md:text-[10rem] leading-[0.8] tracking-tighter" style="font-weight: 900;">Drops</h2>
            
            <div class="flex items-center gap-2 mt-6 mb-8">
                <div class="flex text-yellow-500 text-xl">★★★★★</div>
                <span class="font-extrabold text-lg text-gray-700">4.5</span>
                <span class="text-gray-400 text-sm border-b border-gray-200 ml-2 cursor-pointer hover:text-gray-600">521 Reviews</span>
            </div>

            <div class="bg-white p-8 rounded-[30px] shadow border border-gray-50 max-w-lg mb-10">
                <p class="text-gray-500 text-base leading-relaxed">
                  Experience the Ultimate Sweetness with Happy Drops. We are more than just desserts; we are a tradition of quality and taste. From our signature puddings to a wide array of authentic treats, we use only the finest ingredients to ensure every drop brings you joy. Discover our diverse range and find your favorite moment of happiness today.
                </p>
            </div>
           <div class="hidden lg:flex flex-wrap gap-4">
    <button class="bg-[#E0A142] text-white px-12 py-4 rounded-full font-bold shadow-lg shadow-orange-200 hover:bg-[#c98e35] transition-all transform hover:-translate-y-1">
        ORDER NOW
    </button>
    <button class="border-2 border-[#E0A142] text-[#E0A142] px-10 py-4 rounded-full font-bold hover:bg-orange-50 transition-all uppercase">
        EXPLORE MORE
    </button>
</div>
        </div>
    </div>

    <div class="wave-container absolute bottom-0 left-0 w-full overflow-hidden leading-[0]">
        <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" class="relative block w-full h-[100px]">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#F9FAFB"></path>
        </svg>
    </div>
</section>

<script>
    const openBtn = document.getElementById('open-drawer');
    const closeBtn = document.getElementById('close-drawer');
    const drawer = document.getElementById('side-drawer');
    const overlay = document.getElementById('drawer-overlay');

    function toggleDrawer(isOpen) {
        if (isOpen) {
            overlay.classList.remove('hidden');
            setTimeout(() => {
                overlay.classList.add('opacity-100');
                drawer.classList.remove('translate-x-full');
            }, 10);
            document.body.style.overflow = 'hidden'; // Scroll lock
        } else {
            overlay.classList.remove('opacity-100');
            drawer.classList.add('translate-x-full');
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 300);
            document.body.style.overflow = 'auto'; // Unlock scroll
        }
    }

    openBtn.addEventListener('click', () => toggleDrawer(true));
    closeBtn.addEventListener('click', () => toggleDrawer(false));
    overlay.addEventListener('click', () => toggleDrawer(false));
</script>


<section class="bg-gray-50 py-32 px-10 relative z-10">
    <div id="product-list" class="max-w-7xl mx-auto grid md:grid-cols-3 gap-y-24 gap-x-8">
    </div>
</section>

<div id="order-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] hidden flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-lg rounded-[40px] overflow-hidden shadow-2xl transform transition-all">
        <div class="p-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-black text-[#4A3228] uppercase">Wholesale Order</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-black text-2xl">✕</button>
            </div>

            <form id="order-confirm-form" class="space-y-4">
                <div class="flex items-center gap-4 bg-gray-50 p-4 rounded-3xl mb-4 relative overflow-hidden">
                    <img id="modal-img" src="" class="w-20 h-20 object-cover rounded-2xl shadow-md">
                    <div class="flex-1">
                        <h4 id="modal-title" class="font-black text-[#4A3228] text-lg">Product Name</h4>
                        <div class="flex items-center gap-2">
                            <span id="modal-normal-price" class="text-xs text-gray-400 line-through font-bold">Rs 0.00</span>
                            <span id="discount-badge" class="text-[10px] font-black px-2 py-0.5 rounded-full bg-green-500 text-white uppercase animate-pulse">0% OFF</span>
                        </div>
                        <p id="modal-price-display" class="text-2xl font-black text-[#E0A142]">Rs 0.00</p>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="cust-name" placeholder="Full Name" class="w-full p-4 border rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                    <input type="tel" id="cust-phone" placeholder="Phone Number" class="w-full p-4 border rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                </div>

                <textarea id="cust-address" placeholder="Delivery Address" rows="2" class="w-full p-4 border rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required></textarea>

                <div class="bg-gray-50 p-5 rounded-3xl space-y-3">
                    <div class="flex items-center justify-between">
                        <span class="font-bold text-[#4A3228]">Order Quantity:</span>
                        <input type="number" id="order-qty" value="100" min="100" 
                               oninput="updateDynamicPrice()" 
                               class="w-24 p-2 text-center font-black bg-white rounded-xl border-2 border-gray-100 outline-none focus:border-[#E0A142]">
                    </div>
                    
                    <div class="border-t border-dashed border-gray-200 pt-3 flex flex-col items-end">
                        <span id="total-bill-label" class="text-xl font-black text-[#4A3228]">Total: Rs 0.00</span>
                        <span id="savings-label" class="text-[11px] font-black text-green-600 uppercase tracking-widest bg-green-50 px-3 py-1 rounded-lg mt-1 hidden">
                            You Save: Rs 0.00
                        </span>
                    </div>
                </div>

                <button type="submit" id="submit-btn" class="w-full bg-[#4A3228] text-white py-5 rounded-2xl font-black uppercase tracking-widest shadow-xl hover:bg-black transition-all">
                    Confirm Order
                </button>
            </form>

            <div id="success-view" class="hidden flex flex-col items-center justify-center py-12 transition-all duration-500">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-4">
                    <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-black text-[#4A3228] uppercase">Order Sent!</h3>
                <p class="text-gray-500 text-sm mt-2">We will contact you shortly.</p>
            </div>
        </div>
    </div>
</div>

<script>
    let currentCalculatedUnitPrice = 0;
    let selectedProductBasePrice = 0; 

    const firebaseConfig = {
        apiKey: "AIzaSyAXoEgWEZM36nzBO0YmCVehTksNHzd3rT8",
        authDomain: "happy-drops-9bba9.firebaseapp.com",
        projectId: "happy-drops-9bba9",
        storageBucket: "happy-drops-9bba9.firebasestorage.app",
        messagingSenderId: "337314308860",
        appId: "1:337314308860:web:05f148a54b5678dac2ad79"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const productContainer = document.getElementById('product-list');

    // 1. Render Products (Strictly maintaining your UI)
    db.collection("products").onSnapshot((snapshot) => {
        productContainer.innerHTML = ""; 
        snapshot.forEach((doc) => {
            const p = doc.data();
            const card = `
            <div class="group relative w-full max-w-[350px] mx-auto mt-24 transition-all duration-500 hover:-translate-y-4"> 
                <div class="absolute left-1/2 transform -translate-x-1/2 -top-20 z-20 transition-all duration-500 group-hover:scale-110">
                    <div class="w-44 h-44 rounded-full border-[6px] border-white shadow-2xl overflow-hidden bg-white flex items-center justify-center">
                        <img src="${p.image}" class="w-full h-full object-cover" alt="${p.title2}">
                    </div>
                </div>
                <div class="rounded-[40px] p-8 pt-28 text-white text-center shadow-2xl relative flex flex-col items-center z-10 transition-all duration-500 group-hover:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.3)]" 
                     style="background-color: ${p.bgColor || '#4A3228'}">
                    
                    <div class="absolute top-10 right-6 bg-white text-gray-800 p-3 rounded-2xl shadow-lg border-2 border-dashed border-gray-100 z-30">
                        <div class="text-[10px] text-gray-400 font-bold uppercase leading-none">Normal Price</div>
                        <div class="text-sm font-black">Rs ${parseFloat(p.price).toFixed(2)}</div>
                    </div>

                    <div class="mt-4 w-full">
                        <p class="script-font text-3xl mb-1 leading-tight">${p.title1}</p>
                        <h4 class="text-4xl font-black mb-4 tracking-tighter uppercase leading-[0.9] break-words">${p.title2}</h4>
                        <div class="flex justify-center items-center gap-1 mb-4">
                            <span class="text-yellow-300 text-lg">★★★★★</span>
                            <span class="font-bold ml-1">${p.rating || '4.5'}</span>
                        </div>
                        <p class="text-sm opacity-90 leading-relaxed mb-8 line-clamp-3 h-16 overflow-hidden">${p.description}</p>
                        <button onclick="openOrderModal('${p.title2}', '${p.image}', ${p.price})" 
                                class="bg-[#3D2B1F] text-white px-10 py-4 rounded-2xl text-xs font-black uppercase tracking-widest hover:bg-white hover:text-[#3D2B1F] transition-all transform active:scale-95 shadow-lg">
                            Wholesale Order
                        </button>
                    </div>
                </div>
            </div>`;
            productContainer.innerHTML += card;
        });
    });

    // 2. Updated Logic: Highlighting Discounts and Savings
    function updateDynamicPrice() {
        const qtyInput = document.getElementById('order-qty');
        const priceDisplay = document.getElementById('modal-price-display');
        const totalLabel = document.getElementById('total-bill-label');
        const savingsLabel = document.getElementById('savings-label');
        const discountBadge = document.getElementById('discount-badge');
        
        let qty = parseInt(qtyInput.value) || 0;
        let discountPercent = 0;

        // Tiers Logic
        if (qty >= 300) discountPercent = 28.5; 
        else if (qty >= 250) discountPercent = 21.4;
        else if (qty >= 200) discountPercent = 14.3;
        else if (qty >= 150) discountPercent = 7.1;
        else discountPercent = 0;

        currentCalculatedUnitPrice = selectedProductBasePrice * (1 - (discountPercent / 100));
        
        // Update UI Prices
        priceDisplay.innerText = `Rs ${currentCalculatedUnitPrice.toFixed(2)}`;
        
        const totalBill = qty * currentCalculatedUnitPrice;
        const normalBill = qty * selectedProductBasePrice;
        const savings = normalBill - totalBill;

        totalLabel.innerText = `Total: Rs ${totalBill.toLocaleString(undefined, {minimumFractionDigits: 2})}`;

        // Show/Hide Discount Highlights
        if (discountPercent > 0) {
            discountBadge.innerText = `${Math.round(discountPercent)}% OFF`;
            discountBadge.classList.remove('hidden');
            savingsLabel.innerText = `You Save: Rs ${savings.toLocaleString(undefined, {minimumFractionDigits: 2})}`;
            savingsLabel.classList.remove('hidden');
        } else {
            discountBadge.classList.add('hidden');
            savingsLabel.classList.add('hidden');
        }
    }

    function openOrderModal(title, img, price) {
        selectedProductBasePrice = parseFloat(price);
        document.getElementById('modal-title').innerText = title;
        document.getElementById('modal-img').src = img;
        document.getElementById('modal-normal-price').innerText = `Rs ${selectedProductBasePrice.toFixed(2)}`;
        document.getElementById('order-qty').value = 100;
        
        updateDynamicPrice();
        
        document.getElementById('order-confirm-form').classList.remove('hidden');
        document.getElementById('success-view').classList.add('hidden');
        document.getElementById('order-modal').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        document.getElementById('order-modal').classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    document.getElementById('order-confirm-form').onsubmit = async function(e) {
        e.preventDefault();
        const submitBtn = document.getElementById('submit-btn');
        const form = document.getElementById('order-confirm-form');
        const successView = document.getElementById('success-view');

        submitBtn.innerText = "PROCESSING...";
        submitBtn.disabled = true;

        try {
            await db.collection("orders").add({
                customerName: document.getElementById('cust-name').value,
                phoneNumber: document.getElementById('cust-phone').value,
                address: document.getElementById('cust-address').value,
                productName: document.getElementById('modal-title').innerText,
                quantity: parseInt(document.getElementById('order-qty').value),
                unitPrice: currentCalculatedUnitPrice,
                totalBill: parseInt(document.getElementById('order-qty').value) * currentCalculatedUnitPrice,
                status: "Pending",
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });

            form.classList.add('hidden');
            successView.classList.remove('hidden');
            setTimeout(() => {
                closeModal();
                form.reset();
                submitBtn.innerText = "Confirm Order";
                submitBtn.disabled = false;
            }, 2500);
        } catch (error) {
            alert("Error placing order.");
            submitBtn.disabled = false;
        }
    };
</script>

<section class="relative bg-white py-24 px-10 overflow-hidden">
    
    <div class="absolute top-0 left-0 w-full overflow-hidden leading-[0] z-0">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none" class="relative block w-full h-[60px] md:h-[100px] transform scale-x-[-1]">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#F9FAFB"></path>
        </svg>
    </div>

    <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center relative z-10 pt-10">
        
        <div>
            <span class="text-[#859431] font-bold uppercase tracking-[0.3em] text-sm mb-4 block">Our Story</span>
            <h2 class="text-[#4A3228] text-5xl md:text-6xl font-black mb-8 leading-tight">
                Authentic Taste <br> <span class="text-[#E0A142]">In Every Drop.</span>
            </h2>
            
            <p class="text-gray-500 text-lg leading-relaxed mb-8">
                At Happy Drops, we believe that food is more than just sustenance; it's a celebration of culture and flavor. Our journey started with a simple passion: to bring the most aromatic and authentic spices to your table through our signature dishes.
            </p>

            <div class="grid grid-cols-2 gap-6 mb-10">
                <div class="flex items-start gap-4">
                    <div class="bg-orange-50 p-3 rounded-2xl">
                        <svg class="w-6 h-6 text-[#E0A142]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="font-bold text-[#4A3228]">Fresh Ingredients</h4>
                        <p class="text-xs text-gray-400">Pure and organic farm produce.</p>
                    </div>
                </div>
                <div class="flex items-start gap-4">
                    <div class="bg-green-50 p-3 rounded-2xl">
                        <svg class="w-6 h-6 text-[#859431]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="font-bold text-[#4A3228]">Traditional Way</h4>
                        <p class="text-xs text-gray-400">Cooking with ancient secrets.</p>
                    </div>
                </div>
            </div>

        <a href="about.html"> <button class="border-2 border-[#4A3228] text-[#4A3228] px-10 py-4 rounded-full font-black uppercase text-sm hover:bg-[#4A3228] hover:text-white transition-all">
                Learn More
            </button></a>
        </div>

        <div>
            <img src="https://i.ibb.co/LdByHmdv/Every-Drop-Make-happy-3.png"
                 class="w-full h-auto rounded-[40px] grayscale-[20%] hover:grayscale-0 transition-all duration-500" 
                 alt="Our Kitchen">
        </div>
        
    </div>
</section>



<style>
    /* Infinite Scroll Animation */
    @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

    .animate-marquee {
        display: flex;
        width: max-content;
        animation: marquee 30s linear infinite;
    }

    .animate-marquee:hover {
        animation-play-state: paused; /* Mouse eka thibbama pause wenawa */
    }

    /* Card Hover Effect */
    .review-card:hover {
        border-color: #E0A142;
        transform: translateY(-5px);
    }
</style>

<style>
    /* Left side marquee */
    @keyframes marquee-left {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    /* Right side marquee */
    @keyframes marquee-right {
        0% { transform: translateX(-50%); }
        100% { transform: translateX(0); }
    }

    .animate-marquee-left {
        display: flex;
        width: max-content;
        animation: marquee-left 40s linear infinite;
    }

    .animate-marquee-right {
        display: flex;
        width: max-content;
        animation: marquee-right 40s linear infinite;
    }

    .review-track:hover .animate-marquee-left,
    .review-track:hover .animate-marquee-right {
        animation-play-state: paused;
    }

    /* Compact Card Design */
    .review-card-sm {
        width: 380px;
        background: white;
        padding: 24px;
        border-radius: 24px;
        border: 1px solid #f3f4f6;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }

    .review-card-sm:hover {
        border-color: #E0A142;
        transform: translateY(-3px);
    }
</style>

<style>
    /* Animation settings (same as before) */
    @keyframes marquee-left {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    @keyframes marquee-right {
        0% { transform: translateX(-50%); }
        100% { transform: translateX(0); }
    }

    .animate-marquee-left {
        display: flex;
        width: max-content;
        animation: marquee-left 50s linear infinite; /* Slower animation for larger cards */
    }

    .animate-marquee-right {
        display: flex;
        width: max-content;
        animation: marquee-right 50s linear infinite; /* Slower animation for larger cards */
    }

    .review-track:hover .animate-marquee-left,
    .review-track:hover .animate-marquee-right {
        animation-play-state: paused;
    }

    /* LARGER Card Design */
    .review-card-lg {
        width: 450px; /* Increased width */
        background: white;
        padding: 32px; /* Increased padding */
        border-radius: 30px; /* Slightly rounder corners */
        border: 1px solid #f3f4f6;
        box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.05); /* Stronger shadow for depth */
        transition: all 0.3s ease;
    }

    .review-card-lg:hover {
        border-color: #E0A142;
        transform: translateY(-5px);
        box-shadow: 0 20px 30px -10px rgba(224, 161, 66, 0.15);
    }
</style>

<style>
    /* Marquee Animations */
    @keyframes marquee-left {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    @keyframes marquee-right {
        0% { transform: translateX(-50%); }
        100% { transform: translateX(0); }
    }

    .animate-marquee-left {
        display: flex;
        width: max-content;
        animation: marquee-left 60s linear infinite;
    }

    .animate-marquee-right {
        display: flex;
        width: max-content;
        animation: marquee-right 60s linear infinite;
    }

    .review-track:hover .animate-marquee-left,
    .review-track:hover .animate-marquee-right {
        animation-play-state: paused;
    }

    .review-card-lg {
        width: 450px;
        background: white;
        padding: 32px;
        border-radius: 30px;
        border: 1px solid #f3f4f6;
        box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }
</style>

<style>
    /* Marquee & Card Styles (Same as before) */
    @keyframes marquee-left { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    @keyframes marquee-right { 0% { transform: translateX(-50%); } 100% { transform: translateX(0); } }
    .animate-marquee-left { display: flex; width: max-content; animation: marquee-left 60s linear infinite; }
    .animate-marquee-right { display: flex; width: max-content; animation: marquee-right 60s linear infinite; }
    .review-track:hover div { animation-play-state: paused; }
    
    .review-card-lg {
        width: 450px; background: white; padding: 32px; border-radius: 30px;
        border: 1px solid #f3f4f6; box-shadow: 0 10px 20px -5px rgba(0,0,0,0.05);
    }

    /* Modal Styles */
    #review-modal.hidden { display: none; }
    #review-modal { display: flex; }
</style>

<section class="relative pt-32 pb-24 bg-gray-50 overflow-hidden">
    <div class="absolute top-0 left-0 w-full overflow-hidden leading-[0] z-0">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none" class="relative block w-full h-[80px] md:h-[120px]">
            <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5,103.87-6.14,208,27.32,312.7,35,101.4,7.4,204.6-22.1,302.2-46.3c35.6-8.8,70.2-18,120.3-15.5V0Z" fill="#FFFFFF"></path>
        </svg>
    </div>

    <div class="max-w-7xl mx-auto px-10 mb-16 relative z-10">
        <div class="flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="text-center md:text-left">
                <span class="text-[#859431] font-bold uppercase tracking-[0.3em] text-xs mb-3 block">Testimonials</span>
                <h2 class="text-[#4A3228] text-5xl font-black">Happy <span class="text-[#E0A142]">Drops</span> Reviews</h2>
            </div>
            
            <button onclick="openReviewModal()" class="bg-[#4A3228] text-white px-10 py-4 rounded-full font-bold text-sm uppercase tracking-widest shadow-xl hover:bg-[#3D2B1F] transition-all transform hover:-translate-y-1">
                Write a Review
            </button>
        </div>
    </div>

    <div class="space-y-8 review-track relative z-10">
        <div class="relative flex overflow-x-hidden"><div id="review-row-1" class="animate-marquee-left flex gap-8"></div></div>
        <div class="relative flex overflow-x-hidden"><div id="review-row-2" class="animate-marquee-right flex gap-8"></div></div>
    </div>

    <div id="review-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-[#4A3228]/40 backdrop-blur-md" onclick="closeReviewModal()"></div>
        
        <div class="bg-white w-full max-w-lg rounded-[40px] p-10 relative z-10 shadow-2xl transform transition-all">
            <button onclick="closeReviewModal()" class="absolute top-6 right-8 text-3xl text-gray-400 hover:text-gray-600">&times;</button>
            
            <h3 class="text-[#4A3228] text-3xl font-black mb-2">Share Your Experience</h3>
            <p class="text-gray-400 text-sm mb-8">Your feedback helps the Happy Drops family grow!</p>

            <form id="review-form" class="space-y-5">
                <div>
                    <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2">Your Name</label>
                    <input type="text" id="rev-name" class="w-full bg-gray-50 border-none p-4 rounded-2xl focus:ring-2 focus:ring-[#E0A142] outline-none" placeholder="Enter your full name" required>
                </div>
                <div>
                    <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2">Your Review</label>
                    <textarea id="rev-message" rows="4" class="w-full bg-gray-50 border-none p-4 rounded-2xl focus:ring-2 focus:ring-[#E0A142] outline-none" placeholder="How was the food?" required></textarea>
                </div>
                
                <button type="submit" class="w-full bg-[#E0A142] text-white py-5 rounded-2xl font-black uppercase tracking-widest shadow-lg hover:bg-[#c98e35] transition-all">
                    Submit Review
                </button>
            </form>
        </div>
    </div>
</section>

<script>
   
    const modal = document.getElementById('review-modal');
    const reviewForm = document.getElementById('review-form');

    // 1. Open/Close Logic
    function openReviewModal() {
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeReviewModal() {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    // 2. Load Reviews with Initials
    function loadReviews() {
        db.collection("reviews").orderBy("createdAt", "desc").onSnapshot((snapshot) => {
            const row1 = document.getElementById('review-row-1');
            const row2 = document.getElementById('review-row-2');
            let content = "";

            snapshot.forEach((doc) => {
                const r = doc.data();
                const initials = r.name ? r.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) : "??";
                const colors = ['#859431', '#E0A142', '#4A3228'];
                const bgColor = colors[Math.floor(Math.random() * colors.length)];

                content += `
                    <div class="review-card-lg flex gap-5 items-start">
                        <div class="w-14 h-14 shrink-0 rounded-full flex items-center justify-center text-white font-black text-xl shadow-inner" style="background-color: ${bgColor}">
                            ${initials}
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-center mb-2">
                                <h4 class="font-bold text-[#4A3228] text-lg">${r.name}</h4>
                                <span class="text-yellow-400 text-sm">★★★★★</span>
                            </div>
                            <p class="text-gray-500 text-sm leading-relaxed italic line-clamp-2">"${r.message}"</p>
                        </div>
                    </div>
                `;
            });

            if(content) {
                row1.innerHTML = content + content;
                row2.innerHTML = content + content;
            } else {
                row1.innerHTML = "<p class='text-gray-300 w-full text-center'></p>";
            }
        });
    }

    // 3. Submit Review to Firebase
    reviewForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = e.target.querySelector('button');
        btn.innerText = "SUBMITTING...";
        btn.disabled = true;

        try {
            await db.collection("reviews").add({
                name: document.getElementById('rev-name').value,
                message: document.getElementById('rev-message').value,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            closeReviewModal();
            reviewForm.reset();
            alert("Thanks machn! Review eka add una.");
        } catch (err) {
            alert("Error: " + err.message);
        } finally {
            btn.innerText = "SUBMIT REVIEW";
            btn.disabled = false;
        }
    });

    loadReviews();
</script>

<section class="relative w-full bg-[#4A3228] pb-16 pt-32 px-10 overflow-hidden">
    
    <div class="absolute top-0 left-0 right-2 w-full overflow-hidden leading-[0] z-0">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none" 
             class="relative block w-[102%] h-[80px] md:h-[120px] -left-[1%]" 
             style="margin-top: -1px;">
            
            <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5,103.87-6.14,208,27.32,312.7,35,101.4,7.4,204.6-22.1,302.2-46.3c35.6-8.8,70.2-18,120.3-15.5V0H0Z" fill="#F9FAFB"></path>
        </svg>
    </div>

    <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-10 relative z-10">
        
        <div class="flex-1 text-center md:text-left">
            <div class="inline-block bg-[#E0A142]/20 px-4 py-1 rounded-full mb-4">
                <span class="text-[#E0A142] text-xs font-black uppercase tracking-widest">Newsletter</span>
            </div>
            <h3 class="text-white text-4xl md:text-5xl font-black uppercase tracking-tighter leading-none mb-4">
                Join the <span class="text-[#E0A142]">Flavor</span> Club
            </h3>
            <p class="text-gray-400 text-lg">Subscribe to get exclusive biryani deals & spicy updates.</p>
        </div>

        <div class="w-full md:w-auto">
            <form class="flex flex-col sm:flex-row gap-3">
                <input type="email" 
                       placeholder="Enter your email address" 
                       class="bg-white/10 border-2 border-white/10 text-white px-8 py-5 rounded-2xl focus:outline-none focus:border-[#E0A142] w-full sm:w-96 transition-all placeholder:text-gray-500 font-medium text-lg shadow-inner">
                
                <button class="bg-[#E0A142] text-white px-10 py-5 rounded-2xl font-black uppercase text-sm tracking-[0.2em] hover:bg-white hover:text-[#4A3228] transition-all whitespace-nowrap shadow-xl transform hover:-translate-y-1">
                    Subscribe
                </button>
            </form>
        </div>
    </div>
</section>

<section class="py-24 px-10 bg-white relative z-10 overflow-hidden">
    <div class="absolute inset-0 z-0 lg:hidden">
        <img src="https://i.ibb.co/zh1fXLrr/Every-Drop-Make-happy-2.png" 
             class="w-full h-full object-cover opacity-10" 
             alt="Background">
    </div>

    <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 items-center relative z-10">
        
        <div class="w-full h-full hidden lg:block">
            <img src="https://i.ibb.co/zh1fXLrr/Every-Drop-Make-happy-2.png" 
                 alt="Contact Happy Drops" 
                 class="w-full h-full object-cover">
        </div>

        <div class="flex flex-col">
            <div class="mb-10">
                <span class="text-[#859431] font-bold uppercase tracking-[0.3em] text-xs mb-3 block">Contact Us</span>
                <h2 class="text-[#4A3228] text-5xl md:text-6xl font-black leading-tight">
                    Get In <br><span class="text-[#E0A142]">Touch</span>
                </h2>
                <p class="text-gray-400 mt-4 text-sm uppercase tracking-widest font-bold">We’d love to hear from you!</p>
            </div>

            <div class="bg-white/80 backdrop-blur-sm md:bg-gray-50 p-8 md:p-10 rounded-[30px] border border-gray-100 shadow-xl lg:shadow-none">
               <form id="contact-form" class="space-y-5">
    <div class="grid md:grid-cols-2 gap-5">
        <div class="flex flex-col gap-2">
            <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2">Name</label>
            <input type="text" id="contact-name" class="w-full bg-white border border-gray-100 p-4 rounded-xl focus:ring-2 focus:ring-[#E0A142] outline-none" placeholder="Your Name" required>
        </div>
        <div class="flex flex-col gap-2">
            <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2">Email</label>
            <input type="email" id="contact-email" class="w-full bg-white border border-gray-100 p-4 rounded-xl focus:ring-2 focus:ring-[#E0A142] outline-none" placeholder="Email Address" required>
        </div>
    </div>
    
    <div class="flex flex-col gap-2">
        <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-2">Message</label>
        <textarea id="contact-msg" rows="4" class="w-full bg-white border border-gray-100 p-4 rounded-xl focus:ring-2 focus:ring-[#E0A142] outline-none" placeholder="How can we help you?" required></textarea>
    </div>
    
    <button type="submit" id="contact-submit-btn" class="w-full bg-[#E0A142] text-white py-5 rounded-xl font-black uppercase tracking-widest hover:bg-[#4A3228] transition-all transform active:scale-95 shadow-lg shadow-orange-100">
        Send Message
    </button>
</form>
            </div>
        </div>
    </div>
</section>

<script>
    document.getElementById('contact-form').onsubmit = async function(e) {
    e.preventDefault(); // Page එක refresh වෙන එක නවත්තන්න
    
    const submitBtn = document.getElementById('contact-submit-btn');
    const name = document.getElementById('contact-name').value;
    const email = document.getElementById('contact-email').value;
    const message = document.getElementById('contact-msg').value;

    // බටන් එක disable කරන්න දෙපාරක් click නොවෙන්න
    submitBtn.innerText = "SENDING...";
    submitBtn.disabled = true;

    try {
        // Firestore එකේ 'contact_messages' කියන තැනට දත්ත යැවීම
        await db.collection("contact_messages").add({
            name: name,
            email: email,
            message: message,
            status: "New", // ඇඩ්මින්ට පස්සේ බලාගන්න ලේසි වෙන්න
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        alert("Message sent successfully! Admin will reply soon.");
        document.getElementById('contact-form').reset(); // Form එක හිස් කරන්න
        
    } catch (error) {
        console.error("Error sending message: ", error);
        alert("Something went wrong. Please try again.");
    } finally {
        // බටන් එක ආයෙත් සාමාන්‍ය තත්වයට පත් කිරීම
        submitBtn.innerText = "SEND MESSAGE";
        submitBtn.disabled = false;
    }
};
</script>

<footer class="hidden md:block bg-[#3D2B1F] text-white pt-24 pb-8 px-10 relative">
    
    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#E0A142] to-transparent opacity-50"></div>

    <div class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-16 pb-20">
            
            <div class="md:col-span-4 space-y-8">
                <div>
                    <h2 class="font-montserrat font-black text-4xl tracking-tighter leading-none mb-2">
                        HAPPY<span class="text-[#E0A142]">DROPS.</span>
                    </h2>
                    <p class="text-[#859431] font-bold text-xs uppercase tracking-[0.4em]">Premium Biryani UI</p>
                </div>
                <p class="text-gray-400 text-sm leading-relaxed max-w-sm">
                    Crafting extraordinary culinary experiences with the finest spices and traditional secrets passed down through generations.
                </p>
                <div class="flex gap-3">
                    <a href="#" class="w-12 h-12 rounded-xl border border-white/10 flex items-center justify-center hover:bg-[#E0A142] hover:border-[#E0A142] transition-all duration-500 group">
                        <svg class="w-5 h-5 text-gray-500 group-hover:text-white transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    </a>
                    <a href="#" class="w-12 h-12 rounded-xl border border-white/10 flex items-center justify-center hover:bg-[#E0A142] hover:border-[#E0A142] transition-all duration-500 group">
                        <svg class="w-5 h-5 text-gray-500 group-hover:text-white transition-colors" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                    </a>
                </div>
            </div>

            <div class="md:col-span-2 space-y-8">
                <h4 class="text-white font-bold text-sm uppercase tracking-widest">Explore</h4>
                <ul class="space-y-4">
                    <li><a href="#" class="text-gray-500 hover:text-[#E0A142] text-sm transition-colors">Menu</a></li>
                    <li><a href="#" class="text-gray-500 hover:text-[#E0A142] text-sm transition-colors">Special Offers</a></li>
                    <li><a href="#" class="text-gray-500 hover:text-[#E0A142] text-sm transition-colors">Our Story</a></li>
                </ul>
            </div>

            <div class="md:col-span-3 space-y-8">
                <h4 class="text-white font-bold text-sm uppercase tracking-widest">Contact</h4>
                <div class="space-y-4">
                    <p class="text-gray-500 text-sm leading-relaxed">4/18B Ayurveda Lane,<br>Colombo Road, Kurunegala</p>
                    <p class="text-[#E0A142] font-black text-lg">+94 71 458 3560</p>
                    <p class="text-gray-500 text-sm">Contact@happydrops.lk</p>
                </div>
            </div>

            <div class="md:col-span-3 bg-white/5 p-8 rounded-[30px] border border-white/5">
                <h4 class="text-white font-bold text-sm uppercase tracking-widest mb-6 text-center">Service Hours</h4>
                <div class="space-y-3 text-center">
                    <div class="py-2">
                        <span class="text-[#E0A142] font-black text-4xl block">24 / 7</span>
                        <span class="text-gray-500 text-[10px] font-bold tracking-[0.2em] uppercase">Open Always</span>
                    </div>
                    <div class="mt-6">
                        <button class="w-full bg-white text-[#3D2B1F] py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] hover:bg-[#E0A142] hover:text-white transition-all">
                            Order Online
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="pt-10 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-6">
            <p class="text-gray-600 text-[10px] font-bold uppercase tracking-[0.3em]">
                © 2026 HAPPY DROPS PREMIUM. ALL RIGHTS RESERVED.
            </p>
            <div class="flex gap-8">
                <a href="#" class="text-gray-600 hover:text-white text-[10px] font-bold uppercase tracking-widest transition-colors">Privacy</a>
                <a href="#" class="text-gray-600 hover:text-white text-[10px] font-bold uppercase tracking-widest transition-colors">Terms</a>
            </div>
        </div>
    </div>
</footer>

<div class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-gray-100 flex justify-around items-center py-3 z-[100] md:hidden shadow-[0_-8px_30px_rgba(0,0,0,0.08)]">
    
    <a href="index.html" class="flex flex-col items-center gap-1 group transition-all">
        <div class="w-10 h-10 rounded-xl bg-orange-50 flex items-center justify-center group-hover:bg-[#E0A142] group-active:scale-90 transition-all">
            <svg class="w-5 h-5 text-[#E0A142] group-hover:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
        </div>
        <span class="text-[9px] font-black uppercase tracking-widest text-gray-400 group-hover:text-[#4A3228]">Home</span>
    </a>

    <a href="menu.html" class="flex flex-col items-center gap-1 group transition-all">
        <div class="w-10 h-10 rounded-xl bg-green-50 flex items-center justify-center group-hover:bg-[#859431] group-active:scale-90 transition-all">
            <svg class="w-5 h-5 text-[#859431] group-hover:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
            </svg>
        </div>
        <span class="text-[9px] font-black uppercase tracking-widest text-gray-400 group-hover:text-[#4A3228]">Menu</span>
    </a>

    <a href="menu.html" class="flex flex-col items-center gap-1 group transition-all">
        <div class="w-10 h-10 rounded-xl bg-amber-50 flex items-center justify-center group-hover:bg-[#E0A142] group-active:scale-90 transition-all">
            <svg class="w-5 h-5 text-[#E0A142] group-hover:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
        </div>
        <span class="text-[9px] font-black uppercase tracking-widest text-gray-400 group-hover:text-[#4A3228]">Store</span>
    </a>

    <a href="about.html" class="flex flex-col items-center gap-1 group transition-all">
        <div class="w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center group-hover:bg-[#4A3228] group-active:scale-90 transition-all">
            <svg class="w-5 h-5 text-[#4A3228] group-hover:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </div>
        <span class="text-[9px] font-black uppercase tracking-widest text-gray-400 group-hover:text-[#4A3228]">About</span>
    </a>

</div>
<style>
    @media (max-width: 768px) {
        body { padding-bottom: 80px; }
    }
</style>

<div id="auth-modal" class="fixed inset-0 bg-[#4A3228]/60 backdrop-blur-sm z-[110] hidden flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl relative p-10">
        <button onclick="closeAuthModal()" class="absolute top-6 right-8 text-3xl text-gray-400 hover:text-gray-600">&times;</button>
        
        <div id="login-view">
            <div class="text-center mb-8">
                <h3 class="text-[#4A3228] text-3xl font-black uppercase tracking-tighter">Login</h3>
                <p class="text-gray-400 text-sm">Welcome back to Happy Drops!</p>
            </div>
            <form id="login-form" class="space-y-4">
                <input type="email" id="login-email" placeholder="Email Address" class="w-full bg-gray-50 border-none p-4 rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                <input type="password" id="login-password" placeholder="Password" class="w-full bg-gray-50 border-none p-4 rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                <button type="submit" class="w-full bg-[#E0A142] text-white py-4 rounded-2xl font-black uppercase tracking-widest hover:bg-[#4A3228] transition-all">Login Now</button>
            </form>
            <p class="mt-6 text-center text-sm text-gray-500">Don't have an account? <a href="javascript:void(0)" onclick="toggleAuthMode('signup')" class="text-[#E0A142] font-bold">Sign Up</a></p>
        </div>

        <div id="signup-view" class="hidden">
            <div class="text-center mb-8">
                <h3 class="text-[#4A3228] text-3xl font-black uppercase tracking-tighter">Sign <span class="text-[#E0A142]">Up</span></h3>
                <p class="text-gray-400 text-sm">Create your premium account</p>
            </div>
            <form id="signup-form" class="space-y-4">
                <input type="text" id="signup-name" placeholder="Full Name" class="w-full bg-gray-50 border-none p-4 rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                <input type="email" id="signup-email" placeholder="Email Address" class="w-full bg-gray-50 border-none p-4 rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                <input type="password" id="signup-password" placeholder="Create Password" class="w-full bg-gray-50 border-none p-4 rounded-2xl outline-none focus:ring-2 focus:ring-[#E0A142]" required>
                <button type="submit" class="w-full bg-[#4A3228] text-white py-4 rounded-2xl font-black uppercase tracking-widest hover:bg-[#E0A142] transition-all">Create Account</button>
            </form>
            <p class="mt-6 text-center text-sm text-gray-500">Already have an account? <a href="javascript:void(0)" onclick="toggleAuthMode('login')" class="text-[#E0A142] font-bold">Login</a></p>
        </div>
    </div>
</div>


<a href="https://wa.me/94714583560" 
   target="_blank" 
   class="fixed bottom-24 md:bottom-8 right-6 z-[120] group transition-all duration-300"
   aria-label="Contact us on WhatsApp">
    
    <span class="absolute inline-flex h-full w-full rounded-full bg-[#25D366] opacity-75 animate-ping group-hover:hidden"></span>
    
    <div class="relative bg-[#25D366] p-4 rounded-full shadow-[0_10px_25px_rgba(37,211,102,0.4)] transform transition-transform group-hover:scale-110 group-active:scale-95 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.316 1.592 5.43 0 9.856-4.426 9.858-9.855.002-5.43-4.425-9.856-9.855-9.856-2.631 0-5.103 1.025-6.963 2.887-1.859 1.861-2.883 4.332-2.885 6.963-.002 2.073.575 4.017 1.687 5.72l-1.045 3.822 3.937-1.031zm10.745-7.01c-.273-.137-1.62-.8-1.871-.892-.252-.092-.435-.137-.617.137-.182.273-.706.892-.867 1.075-.16.183-.321.206-.593.069-.273-.137-1.149-.425-2.19-1.354-.81-.723-1.356-1.617-1.516-1.891-.16-.273-.018-.42.119-.556.124-.122.273-.321.41-.481.137-.16.182-.273.273-.457.091-.183.046-.343-.023-.48-.068-.137-.617-1.486-.845-2.035-.221-.53-.446-.458-.617-.466-.16-.007-.343-.009-.526-.009-.182 0-.479.069-.73.343-.252.274-.959.938-.959 2.286 0 1.348.981 2.651 1.118 2.835.137.183 1.93 2.947 4.675 4.132.653.282 1.163.451 1.56.577.656.208 1.252.179 1.724.108.526-.078 1.62-.663 1.848-1.303.229-.641.229-1.189.16-1.303-.069-.115-.252-.183-.526-.32z"/>
        </svg>
    </div>
</a>

<script>
    // Auth Modal Functions
function openAuthModal() {
    document.getElementById('auth-modal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeAuthModal() {
    document.getElementById('auth-modal').classList.add('hidden');
    document.body.style.overflow = 'auto';
}

function toggleAuthMode(mode) {
    if (mode === 'signup') {
        document.getElementById('login-view').classList.add('hidden');
        document.getElementById('signup-view').classList.remove('hidden');
    } else {
        document.getElementById('signup-view').classList.add('hidden');
        document.getElementById('login-view').classList.remove('hidden');
    }
}

// 1. Sign Up Logic
document.getElementById('signup-form').onsubmit = async (e) => {
    e.preventDefault();
    const email = document.getElementById('signup-email').value;
    const pass = document.getElementById('signup-password').value;
    const name = document.getElementById('signup-name').value;

    try {
        const result = await firebase.auth().createUserWithEmailAndPassword(email, pass);
        await result.user.updateProfile({ displayName: name });
        alert("Account Created Successfully, " + name + "!");
        closeAuthModal();
    } catch (error) {
        alert("Error: " + error.message);
    }
};

// 2. Login Logic
document.getElementById('login-form').onsubmit = async (e) => {
    e.preventDefault();
    const email = document.getElementById('login-email').value;
    const pass = document.getElementById('login-password').value;

    try {
        await firebase.auth().signInWithEmailAndPassword(email, pass);
        alert("Login Successful!");
        closeAuthModal();
    } catch (error) {
        alert("Login Error: " + error.message);
    }
};

// 3. Monitor Auth State (Login ද Logout ද කියලා බලනවා)
firebase.auth().onAuthStateChanged((user) => {
    const loginBtn = document.getElementById('main-login-btn');
    if (user) {
        // User ලොග් වෙලා ඉන්නවා නම් බටන් එක Logout වෙනවා
        loginBtn.innerText = "LOGOUT";
        loginBtn.onclick = () => {
            firebase.auth().signOut().then(() => alert("Logged Out!"));
        };
    } else {
        // User ලොග් වෙලා නැත්නම් බටන් එක Login වෙනවා
        loginBtn.innerText = "LOGIN";
        loginBtn.onclick = openAuthModal;
    }
});
</script>

</body>
</html>